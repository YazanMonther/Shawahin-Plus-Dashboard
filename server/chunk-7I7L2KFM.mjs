import './polyfills.server.mjs';
import{H as F,I as U,J as x,a as c,b as d,k as l,u as j}from"./chunk-65BLW562.mjs";import{Da as q,Ea as h,F as R,Fa as I,I as g,J as C,Jb as M,K as v,Kb as A,Ma as $,Ob as H,Ra as k,Wa as T,Xa as b,Ya as w,fc as O,h as a,ja as m,ka as S,s as p,sa as f}from"./chunk-2BUOXUC6.mjs";var y=(()=>{let t=class t{constructor(o,i){this.Http=o,this.localStorageService=i,this.getAllRequests="ChargingStationRequest/GetAllRequest",this.getById="ChargingStationRequest/GetRequestById",this.acceptRequestUrl="ChargingStations",this.authToken=this.localStorageService.getToken(),this.deleteRequest="ChargingStationRequest/Delete",this.denayRequestUrl="ChargingStationRequest/Denay",this.headers=new M({"Content-Type":"application/json",Authorization:`bearer ${this.authToken}`}),this.getAll=()=>this.Http.get(`${c}/${this.getAllRequests}?userId=${this.getUserIdFromLocalStorage()}`,{headers:this.headers}),this.getReqById=e=>this.Http.get(`${c}/${this.getById}/${e}`,{headers:this.headers}),this.acceptRequest=e=>{if(!this.authToken)return a("Authentication token is missing");let s={headers:this.headers};return this.Http.post(`${c}/${this.acceptRequestUrl}/${e}/${this.getUserIdFromLocalStorage()}`,null,s).pipe(p(r=>{console.error("Error:",r);let u=r.error?r.error:"Something went wronG";return a(u)}))},this.removeRequest=e=>{if(!this.authToken)return a("Authentication token is missing");let s={headers:this.headers};return this.Http.delete(`${c}/${this.deleteRequest}/${e}`,s).pipe(p(r=>{console.error("Error:",r);let u=r.error?r.error:"Something went wrong";return a(u)}))},this.denayRequest=e=>{if(!this.authToken)return a("Authentication token is missing");let s={headers:this.headers};return this.Http.put(`${c}/${this.denayRequestUrl}/${e}`,null,s).pipe(p(r=>{console.error("Error:",r);let u=r.error?r.error:"Something went wrong";return a(u)}))}}getUserIdFromLocalStorage(){return console.log(this.localStorageService.getUserId()),console.log(`token : ${this.authToken}`),this.localStorageService.getUserId()||""}};t.\u0275fac=function(i){return new(i||t)(g(A),g(d))},t.\u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var P=()=>[5,10,25,100],te=(()=>{let t=class t{constructor(o,i){this.router=o,this.localStorage=i,this.IdType="requestId",this.requestService=C(y),this.dataSource=new j,this.displayedColumns=["requestId","requestStatus","chargerCost","chargerStatus","country","chargerType","stationName","contactName","email","phone","paymentMethod","paymentType"]}onRowClick(o){console.log("Row Clicked. RequestId:",o),this.router.navigate([`${l.stations}/${l.requestDetails}/${o}`])}ngOnInit(){this.getAllRequests().subscribe(o=>{this.dataSource.data=o}),this.localStorage.setLastVisitedRoute(`/${l.stations}/${l.stationsRequest}`)}getAllRequests(){return this.requestService.getAll()}updateRequestStatus(o,i){let e=this.dataSource.data.findIndex(s=>s.requestId===o);e!==-1&&(this.dataSource.data[e].requestStatus=i)}};t.\u0275fac=function(i){return new(i||t)(S(O),S(d))},t.\u0275cmp=v({type:t,selectors:[["app-request-table"]],standalone:!0,features:[T([y]),b],decls:5,vars:6,consts:[[1,"mat-elevation-z8"],[3,"dataSource","displayedColumns","pageSizeOptions","IdType","rowClick"],["showFirstLastButtons","",3,"pageSizeOptions"]],template:function(i,e){i&1&&(q(0,"h2"),k(1,"Stations Request"),h(),q(2,"div",0)(3,"app-table",1),$("rowClick",function(r){return e.onRowClick(r)}),h(),I(4,"mat-paginator",2),h()),i&2&&(m(3),f("dataSource",e.dataSource.data)("displayedColumns",e.displayedColumns)("pageSizeOptions",e.pageSizeOptions)("IdType",e.IdType),m(1),f("pageSizeOptions",w(5,P)))},dependencies:[U,F,H,x],styles:["h2[_ngcontent-%COMP%]{margin-top:20px}button[_ngcontent-%COMP%]{padding:3px 6px;cursor:pointer;background-color:#4caf50;color:#fff;border:none;border-radius:3px;font-size:10px}button[_ngcontent-%COMP%]:hover{background-color:#45a049}.mat-paginator[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:20px}"]});let n=t;return n})();export{y as a,te as b};
